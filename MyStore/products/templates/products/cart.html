{% extends 'main/layout.html' %}
{% load static %}

{% block title %}Корзина{% endblock %}

{% block content %}
<div class="cart-container">
    <div class="cart-items">
        {% for item in items %}
        <div class="cart-item">
            <img src="{{ item.product.image.url }}" alt="{{ item.product.name }}">
            <div class="item-info">
                <h3>{{ item.product.name }}</h3>
                <p>{{ item.product.price }} ₸</p>
                <div class="quantity-controls">
                  <button class="decrease-qty quantity-btn" data-item-id="{{ item.id }}" data-action="minus">−</button>
                  <span class="quantity">{{ item.quantity }}</span>
                  <button class="increase-qty quantity-btn" data-item-id="{{ item.id }}" data-action="plus">+</button>
                </div>
                <p>Итого: {{ item.total_price }} ₸</p>
                <button class="remove-item" data-item-id="{{ item.id }}">Удалить</button>
            </div>
        </div>
        {% empty %}
        <p class="empty-cart">Ваша корзина пуста.</p>
        {% endfor %}
    </div>

    <div class="cart-summary">
        <h2>Итого</h2>
        <p class="total-price">{{ total }} ₸</p>
        <button class="checkout-btn">Оформить заказ</button>
    </div>
</div>

<script src="{% static 'products/js/cart.js' %}"></script>
{% endblock %}
